# Research System Environment Configuration Template
# ============================================
# Copy this file to .env and add your actual API keys
# ============================================

# ============================================
# LLM CONFIGURATION (REQUIRED - Choose one provider)
# ============================================
# Select which LLM provider to use: openai, anthropic, or azure_openai
LLM_PROVIDER=openai

# OpenAI Configuration
OPENAI_API_KEY=sk-proj-YOUR_KEY_HERE
OPENAI_API_BASE=https://api.openai.com/v1
OPENAI_ORG_ID=org-YOUR_ORG_ID
OPENAI_MODEL=gpt-4-turbo-preview

# Anthropic Configuration (Alternative)
# ANTHROPIC_API_KEY=sk-ant-YOUR_KEY_HERE
# ANTHROPIC_MODEL=claude-3-opus-20240229

# Azure OpenAI Configuration (Alternative)
# AZURE_OPENAI_API_KEY=your_azure_key_here
# AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
# AZURE_OPENAI_DEPLOYMENT_PLANNER=gpt-4
# AZURE_OPENAI_DEPLOYMENT_RESEARCHER=gpt-4
# AZURE_OPENAI_DEPLOYMENT_VERIFIER=gpt-4
# AZURE_OPENAI_DEPLOYMENT_WRITER=gpt-4

# ============================================
# SEARCH PROVIDERS (At least one recommended)
# ============================================
# Comma-separated list of providers to use
SEARCH_PROVIDERS=tavily,brave,serper

# Tavily Search API - https://tavily.com/
TAVILY_API_KEY=tvly-YOUR_KEY_HERE

# Brave Search API - https://brave.com/search/api/
BRAVE_API_KEY=BSA-YOUR_KEY_HERE

# Serper API - https://serper.dev/
SERPER_API_KEY=YOUR_KEY_HERE

# SerpAPI - https://serpapi.com/ (Optional)
# SERPAPI_API_KEY=YOUR_KEY_HERE

# National Park Service API (Optional)
# NPS_API_KEY=YOUR_KEY_HERE

# ============================================
# API COMPLIANCE (REQUIRED for production)
# ============================================
# Your contact email (used in User-Agent headers)
CONTACT_EMAIL=your-email@example.com

# ============================================
# SECURITY (REQUIRED if using encryption)
# ============================================
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
# RESEARCH_ENCRYPTION_KEY=YOUR_FERNET_KEY_HERE

# ============================================
# RUNTIME & TIMEOUTS
# ============================================
WALL_TIMEOUT_SEC=1800
HTTP_TIMEOUT_SECONDS=30
PROVIDER_TIMEOUT_SEC=20

# ============================================
# RETRY & CONCURRENCY
# ============================================
RETRY_MAX_TRIES=5
RETRY_BACKOFF_BASE_SECONDS=0.5
# CONCURRENCY is dynamically calculated if not set

# ============================================
# COST LIMITS
# ============================================
MAX_COST_USD=2.50

# ============================================
# OUTPUT CONFIGURATION
# ============================================
OUTPUT_DIR=outputs
CHECKPOINT_DIR=outputs/checkpoints

# ============================================
# RESEARCH POLICY
# ============================================
FRESHNESS_WINDOW="24 months"
REGIONS=US,EU
SOURCE_WHITELIST=[".gov",".edu",".ac.uk",".who.int",".un.org"]

# ============================================
# FEATURE FLAGS
# ============================================
# Free API Providers
ENABLE_FREE_APIS=true
ENABLED_PROVIDERS=

# LLM Features
USE_LLM_CLAIMS=true
USE_LLM_SYNTH=true
USE_LLM_RERANK=true

# Evidence Requirements
MIN_EVIDENCE_CARDS=24
MAX_BACKFILL_ATTEMPTS=3

# Quality Thresholds
MIN_TRIANGULATION_RATE=0.35
MAX_DOMAIN_CONCENTRATION=0.25
MIN_CREDIBILITY=0.6
STRICT=false

# Enhanced Features
ENABLE_PRIMARY_CONNECTORS=true
ENABLE_EXTRACT=true
ENABLE_SNAPSHOT=false
ENABLE_MINHASH_DEDUP=true
ENABLE_DUCKDB_AGG=true
ENABLE_SBERT_CLUSTERING=true
ENABLE_AREX=false
ENABLE_CONTROVERSY=false

# Open Access Features
ENABLE_UNPAYWALL=true
ENABLE_S2=true
ENABLE_CORE=true

# Content Processing
ENABLE_PDF_TABLES=false
ENABLE_LANGDETECT=false

# Crawling & Caching
ENABLE_HTTP_CACHE=false
ENABLE_POLITENESS=false
ENABLE_WARC=false
HTTP_CACHE_DIR=./.http_cache

# Domain Quality
ENABLE_TRANCO=false
ENABLE_GEO_NORM=false

# ============================================
# DATABASE & CACHE (Optional)
# ============================================
# ENABLE_DATABASE=false
# DATABASE_URL=postgresql://user:pass@localhost:5432/research
# ENABLE_REDIS=false
# REDIS_URL=redis://localhost:6379

# ============================================
# OBSERVABILITY (Optional)
# ============================================
LOG_LEVEL=INFO
# SENTRY_DSN=your_sentry_dsn_here
# ENABLE_PROMETHEUS=false
# PROMETHEUS_PORT=9100

# ============================================
# INTENT CLASSIFICATION (v8.7.0)
# ============================================
# Enable hybrid intent classification (rules + semantic + NLI)
INTENT_USE_HYBRID=true
# Enable NLI fallback (requires transformers library)
INTENT_USE_NLI=false
# Semantic similarity minimum score threshold
INTENT_MIN_SCORE=0.42
# NLI confidence minimum threshold
INTENT_NLI_MIN_SCORE=0.3
# Models for intent classification
INTENT_EMBED_MODEL=sentence-transformers/all-MiniLM-L6-v2
INTENT_NLI_MODEL=facebook/bart-large-mnli
# Path to intent labels configuration
INTENT_LABELS_FILE=research_system/intent/labels.yaml

# ============================================
# CIRCUIT BREAKER CONFIGURATION
# ============================================
# Number of failures before opening circuit
HTTP_CB_FAILS=3
# Seconds to wait before closing circuit
HTTP_CB_RESET=900

# ============================================
# RATE LIMITING (Per-provider RPS)
# ============================================
# OpenStreetMap Nominatim (required by usage policy)
NOMINATIM_RPS=1.0
# SEC EDGAR RSS
SEC_RSS_RPS=0.5
# SerpAPI (to avoid 429 errors)
SERPAPI_RPS=0.2
# Other provider rate limits
OVERPASS_RPS=0.5
WIKIVOYAGE_RPS=2.0

# ============================================
# OPTIONAL FREE API KEYS
# ============================================
# Federal Reserve Economic Data - https://fred.stlouisfed.org/docs/api/api_key.html
# FRED_API_KEY=your_fred_key_here

# Unpaywall (free OA paper access) - https://unpaywall.org/products/api
# UNPAYWALL_EMAIL=your-email@example.com

# ============================================
# OPTIONAL PAID API KEYS
# ============================================
# NewsAPI - https://newsapi.org/
# NEWSAPI_KEY=your_newsapi_key_here

# SEC API - https://sec-api.io/
# SEC_API_KEY=your_sec_api_key_here

# Amazon Product Advertising API
# AMAZON_PA_ACCESS_KEY=your_access_key_here
# AMAZON_PA_SECRET_KEY=your_secret_key_here
# AMAZON_ASSOCIATE_TAG=your_tag_here

# ============================================
# PROXY CONFIGURATION (Optional)
# ============================================
# These are honored implicitly by httpx
# HTTP_PROXY=http://proxy.example.com:8080
# HTTPS_PROXY=http://proxy.example.com:8080
# NO_PROXY=localhost,127.0.0.1